<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><%= title || 'Inicio' %></title>
  <link rel="stylesheet" href="/css/main.css" />
</head>
<body>
  <header>
    <h1>Prueba MVC</h1>
  </header>
  <main>
    <section class="hero">
      <h2><%= message %></h2>
      <p>Esta vista se renderiza desde el controlador.</p>
    </section>

    <% if (typeof error !== 'undefined' || typeof email !== 'undefined' || message === 'Hola desde MVC con Express + EJS') { %>
    <section class="card" style="max-width:480px">
      <h3>Iniciar sesión</h3>
      <% if (typeof error !== 'undefined' && error) { %>
        <div class="error"><%= error %></div>
      <% } %>
      <form method="post" action="/auth/login">
        <div>
          <label for="email">Correo electrónico</label>
          <input id="email" name="email" type="email" required value="<%= typeof email !== 'undefined' ? email : '' %>" />
        </div>
        <div>
          <label for="password">Contraseña</label>
          <input id="password" name="password" type="password" required />
        </div>
        <button type="submit">Entrar</button>
      </form>
      <p style="font-size:.9rem;color:#6b7280">Los datos se verifican contra MongoDB Atlas.</p>
      <p style="font-size:.8rem;color:#6b7280">Configura <code>MONGO_URI</code> en variables de entorno.</p>
    </section>
    <% } else { %>
    <section class="card" style="max-width:480px">
      <p style="text-align:center;color:#10b981;font-size:1.1rem">✓ Sesión iniciada correctamente</p>
      <p style="text-align:center"><a href="/">Cerrar sesión</a></p>
    </section>
    <% } %>
  </main>
  <footer>
    <small>&copy; <%= new Date().getFullYear() %></small>
  </footer>
</body>
</html>
